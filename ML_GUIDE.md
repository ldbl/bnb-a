# ü§ñ BNB ML Trend Reversal System

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑–∞ –º–∞—à–∏–Ω–Ω–æ –æ–±—É—á–µ–Ω–∏–µ, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –≤ –¥–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ –æ–±—Ä—ä—â–∞–Ω–µ –Ω–∞ —Ç—Ä–µ–Ω–¥–∞ –∑–∞ BNB/USDT.

## üìã –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ

- [üéØ –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∞](#-–∫–∞–∫–≤–æ-–ø—Ä–∞–≤–∏-—Å–∏—Å—Ç–µ–º–∞—Ç–∞)
- [üìä –ö—ä–¥–µ—Ç–æ —Å–µ –ø–∞–∑—è—Ç –¥–∞–Ω–Ω–∏—Ç–µ](#-–∫—ä–¥–µ—Ç–æ-—Å–µ-–ø–∞–∑—è—Ç-–¥–∞–Ω–Ω–∏—Ç–µ)
- [üß† –ö–∞–∫ –¥–∞ –æ–±—É—á–∏–º –º–æ–¥–µ–ª–∏—Ç–µ](#-–∫–∞–∫-–¥–∞-–æ–±—É—á–∏–º-–º–æ–¥–µ–ª–∏—Ç–µ)
- [üîÆ –ö–∞–∫ –¥–∞ –ø—Ä–∞–≤–∏–º –ø—Ä–æ–≥–Ω–æ–∑–∏](#-–∫–∞–∫-–¥–∞-–ø—Ä–∞–≤–∏–º-–ø—Ä–æ–≥–Ω–æ–∑–∏)
- [üìà Features –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏](#-features-–∏-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏)
- [‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

## üéØ –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∞

### **–û—Å–Ω–æ–≤–Ω–∏ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- **Trend Reversal Detection** - –ü—Ä–µ–¥—Å–∫–∞–∑–≤–∞ –æ–±—Ä—ä—â–∞–Ω–µ –æ—Ç –≤—ä–∑—Ö–æ–¥—è—â –∫—ä–º –Ω–∏–∑—Ö–æ–¥—è—â —Ç—Ä–µ–Ω–¥ –∏ –æ–±—Ä–∞—Ç–Ω–æ
- **Multi-Model Ensemble** - –ò–∑–ø–æ–ª–∑–≤–∞ Random Forest, Gradient Boosting –∏ Logistic Regression
- **Persistent Storage** - –ú–æ–¥–µ–ª–∏—Ç–µ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –Ω–∞ –¥–∏—Å–∫ –∏ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –∑–∞—Ä–µ–∂–¥–∞—Ç
- **Feature Engineering** - 12 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ features –∑–∞ reversal detection
- **Risk Assessment** - Confidence scoring –∏ risk level –æ—Ü–µ–Ω–∫–∞

### **–¢–∏–ø–æ–≤–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è:**
- `0` = **No Reversal** - –¢—Ä–µ–Ω–¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞
- `1` = **Bullish Reversal** - –û–±—Ä—ä—â–∞–Ω–µ –∫—ä–º –≤—ä–∑—Ö–æ–¥—è—â —Ç—Ä–µ–Ω–¥ (BUY signal)
- `2` = **Bearish Reversal** - –û–±—Ä—ä—â–∞–Ω–µ –∫—ä–º –Ω–∏–∑—Ö–æ–¥—è—â —Ç—Ä–µ–Ω–¥ (SELL signal)

## üìä –ö—ä–¥–µ—Ç–æ —Å–µ –ø–∞–∑—è—Ç –¥–∞–Ω–Ω–∏—Ç–µ

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ:**
```
bnb-a/
‚îú‚îÄ‚îÄ ml_models/                          # üíæ Persistent model storage
‚îÇ   ‚îú‚îÄ‚îÄ random_forest_reversal_10d.pkl  # –û–±—É—á–µ–Ω Random Forest –º–æ–¥–µ–ª
‚îÇ   ‚îú‚îÄ‚îÄ random_forest_reversal_10d_metadata.json  # –ú–µ—Ç–∞–¥–∞–Ω–Ω–∏ –Ω–∞ –º–æ–¥–µ–ª–∞
‚îÇ   ‚îú‚îÄ‚îÄ gradient_boost_reversal_10d.pkl # Gradient Boosting –º–æ–¥–µ–ª
‚îÇ   ‚îú‚îÄ‚îÄ logistic_reversal_10d.pkl       # Logistic Regression –º–æ–¥–µ–ª
‚îÇ   ‚îî‚îÄ‚îÄ ...                             # –î—Ä—É–≥–∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç–∏ (5d, 20d, etc.)
‚îÇ
‚îú‚îÄ‚îÄ ml_enhanced.py                      # üß† –û—Å–Ω–æ–≤–µ–Ω ML engine
‚îú‚îÄ‚îÄ train_ml_models.py                  # üéì Training script
‚îú‚îÄ‚îÄ predict_reversals.py                # üîÆ Prediction script
‚îî‚îÄ‚îÄ ML_GUIDE.md                         # üìö –¢–∞–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### **Metadata —Ñ–æ—Ä–º–∞—Ç:**
```json
{
  "created_at": "2025-08-21T23:04:10.922533",
  "feature_columns": ["rsi", "macd", "bb_position", ...],
  "training_samples": 784,
  "accuracy": 0.9949238578680203,
  "model_type": "random_forest",
  "reversal_threshold": 0.05
}
```

## üß† –ö–∞–∫ –¥–∞ –æ–±—É—á–∏–º –º–æ–¥–µ–ª–∏—Ç–µ

### **–õ–µ—Å–µ–Ω –Ω–∞—á–∏–Ω (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–µ–Ω):**
```bash
# –û—Å–Ω–æ–≤–Ω–æ –æ–±—É—á–µ–Ω–∏–µ —Å default –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
python3 train_ml_models.py

# –û–±—É—á–µ–Ω–∏–µ —Å –ø–æ–≤–µ—á–µ –¥–∞–Ω–Ω–∏
python3 train_ml_models.py --data-limit 5000

# –û–±—É—á–µ–Ω–∏–µ –∑–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç–∏
python3 train_ml_models.py --periods 5 10 15 20

# –¢–µ—Å—Ç —Ä–µ–∂–∏–º (–±–µ–∑ –∑–∞–ø–∞–∑–≤–∞–Ω–µ)
python3 train_ml_models.py --no-save
```

### **–ü—Ä–æ–≥—Ä–∞–º–µ–Ω –Ω–∞—á–∏–Ω:**
```python
from ml_enhanced import TrendReversalML
from ml_predictor import MLPredictor

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
ml_system = TrendReversalML()
base_predictor = MLPredictor()

# –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏
training_data = base_predictor.fetch_training_data("1h", 2000)

# –û–±—É—á–µ–Ω–∏–µ –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç–∏
for periods in [5, 10, 20]:
    result = ml_system.train_reversal_models(training_data, periods)
    print(f"Trained {result['models_trained']} models for {periods}h")
```

### **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞ –æ–±—É—á–µ–Ω–∏–µ:**

| –ü–∞—Ä–∞–º–µ—Ç—ä—Ä | Default | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|----------|
| `data_limit` | 2000 | –ë—Ä–æ–π samples –∑–∞ –æ–±—É—á–µ–Ω–∏–µ |
| `periods` | [5,10,20] | –•–æ—Ä–∏–∑–æ–Ω—Ç–∏ –∑–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ (—á–∞—Å–æ–≤–µ) |
| `reversal_threshold` | 0.05 | 5% –¥–≤–∏–∂–µ–Ω–∏–µ –∑–∞ reversal |
| `trend_lookback` | 10 | –ü–µ—Ä–∏–æ–¥–∏ –∑–∞ trend detection |

## üîÆ –ö–∞–∫ –¥–∞ –ø—Ä–∞–≤–∏–º –ø—Ä–æ–≥–Ω–æ–∑–∏

### **–õ–µ—Å–µ–Ω –Ω–∞—á–∏–Ω:**
```bash
# –û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ –∑–∞ 10 —á–∞—Å–∞ –Ω–∞–ø—Ä–µ–¥
python3 predict_reversals.py

# –ü—Ä–æ–≥–Ω–æ–∑–∞ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω —Ö–æ—Ä–∏–∑–æ–Ω—Ç
python3 predict_reversals.py --periods 20

# –î–µ—Ç–∞–π–ª–Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å individual model results
python3 predict_reversals.py --periods 10 --details
```

### **–ü—Ä–æ–≥—Ä–∞–º–µ–Ω –Ω–∞—á–∏–Ω:**
```python
from ml_enhanced import TrendReversalML
from ml_predictor import MLPredictor

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
ml_system = TrendReversalML()
base_predictor = MLPredictor()

# –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–∏ –¥–∞–Ω–Ω–∏
recent_data = base_predictor.fetch_training_data("1h", 200)

# –ü—Ä–æ–≥–Ω–æ–∑–∞
prediction = ml_system.predict_reversal(recent_data, periods_ahead=10)

print(f"Prediction: {prediction['prediction_label']}")
print(f"Confidence: {prediction['confidence']:.1%}")
```

### **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ:**

| Prediction | Icon | –ó–Ω–∞—á–µ–Ω–∏–µ | Trading Action |
|------------|------|----------|----------------|
| No Reversal | üü°‚û°Ô∏è | –¢—Ä–µ–Ω–¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞ | HOLD |
| Bullish Reversal | üü¢üìà | –û–±—Ä—ä—â–∞–Ω–µ –Ω–∞–≥–æ—Ä–µ | LONG/BUY |
| Bearish Reversal | üî¥üìâ | –û–±—Ä—ä—â–∞–Ω–µ –Ω–∞–¥–æ–ª—É | SHORT/SELL |

### **Risk Levels:**

| Confidence | Risk Level | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|------------|----------|
| ‚â• 80% | üü¢ LOW | –í–∏—Å–æ–∫–æ –¥–æ–≤–µ—Ä–∏–µ |
| 60-79% | üü° MEDIUM | –£–º–µ—Ä–µ–Ω–æ –¥–æ–≤–µ—Ä–∏–µ |
| < 60% | üî¥ HIGH | –ù–∏—Å–∫–æ –¥–æ–≤–µ—Ä–∏–µ |

## üìà Features –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

–°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–ø–æ–ª–∑–≤–∞ **12 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ features** –∑–∞ reversal detection:

### **Technical Indicators (4):**
- `rsi` - Relative Strength Index (14 period)
- `macd` - MACD line (12/26 EMA)
- `macd_histogram` - MACD histogram
- `bb_position` - Bollinger Bands position (0-1)

### **Trend Analysis (3):**
- `trend_5` - 5-period trend slope
- `trend_10` - 10-period trend slope  
- `trend_20` - 20-period trend slope

### **Volatility & Volume (3):**
- `price_volatility` - 20-period rolling volatility
- `volume_ratio` - Volume vs 20-period average
- `volume_spike` - Volume spike detection (>2x average)

### **Pattern Recognition (2):**
- `doji` - Doji candlestick pattern
- `hammer` - Hammer candlestick pattern

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **Reversal Thresholds:**
```python
reversal_thresholds = {
    "bullish_reversal": 0.05,   # 5%+ upward move
    "bearish_reversal": -0.05,  # 5%+ downward move  
    "trend_lookback": 10,       # Periods for trend detection
    "prediction_periods": [5, 10, 20]  # Available horizons
}
```

### **Model Configurations:**
```python
model_configs = {
    "random_forest": {
        "n_estimators": 100,
        "max_depth": 10,
        "random_state": 42
    },
    "gradient_boost": {
        "n_estimators": 100,
        "learning_rate": 0.1,
        "max_depth": 6
    },
    "logistic": {
        "max_iter": 1000,
        "random_state": 42
    }
}
```

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ—Ä–∏

### **Scenario 1: Daily Trading**
```bash
# –°—É—Ç—Ä–∏–Ω - –æ–±—É—á–∏ –º–æ–¥–µ–ª–∏—Ç–µ —Å fresh data
python3 train_ml_models.py --data-limit 1000 --periods 5 10

# –ü—Ä–µ–¥–∏ —Ç—ä—Ä–≥–æ–≤–∏—è - –ø—Ä–æ–≤–µ—Ä–∏ –∑–∞ reversals
python3 predict_reversals.py --periods 5 --details
```

### **Scenario 2: Swing Trading**
```bash
# –û–±—É—á–∏ –∑–∞ –ø–æ-–¥—ä–ª–≥–∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç–∏
python3 train_ml_models.py --periods 10 20 50

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ medium-term reversals
python3 predict_reversals.py --periods 20
```

### **Scenario 3: Risk Management**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω risk check
prediction = ml_system.predict_reversal(data, 10)

if prediction['confidence'] >= 0.8:
    if prediction['ensemble_prediction'] == 2:  # Bearish reversal
        print("üö® HIGH CONFIDENCE BEARISH REVERSAL - Consider stop loss!")
```

## üîß –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –∏ troubleshooting

### **–û–±—â–∏ –ø—Ä–æ–±–ª–µ–º–∏:**

1. **"No trained models found"**
   ```bash
   # –†–µ—à–µ–Ω–∏–µ: –û–±—É—á–∏ –º–æ–¥–µ–ª–∏—Ç–µ –ø—ä—Ä–≤–æ
   python3 train_ml_models.py
   ```

2. **"No models trained for X periods"**
   ```bash
   # –†–µ—à–µ–Ω–∏–µ: –û–±—É—á–∏ –∑–∞ —Ç–æ–∑–∏ —Ö–æ—Ä–∏–∑–æ–Ω—Ç
   python3 train_ml_models.py --periods X
   ```

3. **Low accuracy –º–æ–¥–µ–ª–∏**
   ```bash
   # –†–µ—à–µ–Ω–∏–µ: –ò–∑–ø–æ–ª–∑–≤–∞–π –ø–æ–≤–µ—á–µ –¥–∞–Ω–Ω–∏
   python3 train_ml_models.py --data-limit 5000
   ```

### **Performance Tips:**

- **–ü—Ä–µ–æ–±—É—á–∞–≤–∞–π –º–æ–¥–µ–ª–∏—Ç–µ** –≤—Å–µ–∫–∏ –¥–µ–Ω —Å fresh data
- **–ò–∑–ø–æ–ª–∑–≤–∞–π ensemble predictions** –≤–º–µ—Å—Ç–æ individual models
- **–ö–æ–º–±–∏–Ω–∏—Ä–∞–π —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑** –∑–∞ –ø–æ-–¥–æ–±—Ä–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
- **Backtest —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏—Ç–µ** –ø—Ä–µ–¥–∏ real trading

## ‚ö†Ô∏è –í–∞–∂–Ω–∏ –±–µ–ª–µ–∂–∫–∏

- **–ù–µ –µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ —Å—ä–≤–µ—Ç** - –∏–∑–ø–æ–ª–∑–≤–∞–π –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω —Ä–∏—Å–∫
- **–ú–æ–¥–µ–ª–∏ –º–æ–≥–∞—Ç –¥–∞ overfitting** - –≤–∞–ª–∏–¥–∏—Ä–∞–π —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
- **Market conditions —Å–µ –ø—Ä–æ–º–µ–Ω—è—Ç** - –ø—Ä–µ–æ–±—É—á–∞–≤–∞–π —Ä–µ–¥–æ–≤–Ω–æ
- **–ò–∑–ø–æ–ª–∑–≤–∞–π risk management** - –≤–∏–Ω–∞–≥–∏ —Å stop loss
- **–ö–æ–º–±–∏–Ω–∏—Ä–∞–π —Å –¥—Ä—É–≥–∏ –∞–Ω–∞–ª–∏–∑–∏** - –Ω–µ —Ä–∞–∑—á–∏—Ç–∞–π —Å–∞–º–æ –Ω–∞ ML

---

üí° **–ó–∞ –≤—ä–ø—Ä–æ—Å–∏ –∏ –ø–æ–¥–¥—Ä—ä–∂–∫–∞:** –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –ª–æ–≥–æ–≤–µ—Ç–µ –≤ `logs/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞
